<!DOCTYPE html>
<html lang="en">
	<head>
		<script src="js/mail-generator.js"></script>
		<link href="css/style.css" rel="stylesheet" media="screen">
    <script>
      window.onload = function(){
        // ALL OF YOUR JAVASCRIPT CODE SHOULD GO HERE. 
				// We have to use window.onload so your JavaScript doesn't execute until the page has loaded and all HTML has been downloaded to your browser
		
		console.log('Aloha');
		

		function getGeeMail(allMail){	
		for (var i = 0; i < allMail.length; i++){

			var dateElem = document.createElement('div');
			dateElem.className = "daDate";
			dateElem.innerHTML = allMail[i].date;
			document.body.appendChild(dateElem);
	
		
			var senderElem = document.createElement('div');
			senderElem.className = "daSender";
			senderElem.innerHTML = allMail[i].sender;
			document.body.appendChild(senderElem);


			var subjElem = document.createElement('div');
			subjElem.className = "daSubj";
			subjElem.innerHTML = allMail[i].subject;
			document.body.appendChild(subjElem);
		

			var mailElem = document.createElement('div');
			mailElem.className = "daBody";
			mailElem.innerHTML = window.geemails[i].body;
			subjElem.appendChild(mailElem);
		}
	}
		getGeeMail(window.geemails);

		var getMail = document.getElementsByClassName('daSubj');

		for (var i = 0; i<getMail.length; i++){
			getMail[i].addEventListener('click', showMail);
		}

		function showMail(){
			// console.log(this.innerHTML);
			var emCont = this.querySelectorAll('.daBody')[0];
			if (emCont.style.display === 'block'){
				emCont.style.display = 'none';
			}else{
				emCont.style.display = 'block';
			}
		}
// helper function 
		function buildElem (elem, label, bodyContent){
			var box = document.createElement(elem);
			box.className = label;
			box.innerHTML = bodyContent;

			return box;
		}

		var daNewMessages = setInterval(allNew, 5000);

		function allNew(){
			var allNew = getNewMessage();

			var newDate = buildElem ('div', 'daDate', allNew.date);
			document.body.appendChild(newDate);
	
		
			var newSender = buildElem ('div', 'daSender', allNew.sender);
			document.body.appendChild(newSender);


			var newSubject = buildElem ('div', 'daSubj', allNew.subject);
			document.body.appendChild(newSubject);
		

			var newBody = buildElem ('div', 'daBody', allNew.body);
			newSubject.appendChild(newBody);


			newSubject.addEventListener('click', showMail);


		}


	}
		

	</script>
	</head>

	<body>
		<header class="container">
			<h1> Welcome to Gee-Mail!</h1>
		</header>
			<p> Access your electronic mail below!</p>

		<div></div>
		
		

		<script src="js/mail-generator.js"></script>
	</body>
</html>
